---
title: git diff
categories:
  - git
tags:
  - git diff 
date: 2021-06-22 11:26:20
update: 2021-06-22 11:26:20
---



本篇文章介绍了地方法比较的说明，git diff常用参数，git diff里程碑比较和扩展用法。

<!-- more -->

### diff比较说明

~~~
1 --- hello       2020-09-21 17:45:33.551610940 +0800  
2 +++ world       2020-09-21 17:44:46.343610465 +0800  
3 @@ -1，4 +1，4 @@  
4 -应该杜绝文章中的错别子。  
5 +应该杜绝文章中的错别字。  
6    
7  但是无论使用
8  * 全拼，双拼  
9 @@ -6，6 +6，7 @@ 
10   
11  是人就有可能犯错，软件更是如此。 
12   
13 -犯了错，就要扣工资！ 
14 - 
15  改正的成本可能会很高。 
16 + 
17 +但是“只要眼球足够多，所有Bug都好捉”， 
18 +这就是开源的哲学之一。
~~~
为了说明方便，为每一行增添了行号。

- 第1行和第2行分别记录了原始文件和目标文件的文件名及时间戳。以三个减号（---）开始的行标识的是原始文件，以三个加号（+++）开始的行标识的是目标文件。

- 在比较内容中，以减号（-）开始的行是只出现在原始文件中的行，例如：第4、13、14行。

- 在比较内容中，以加号（+）开始的行是只出现在目标文件中的行，例如：第5行和16-18行。

- 在比较内容中，以空格开始的行，是在原始文件和目标文件中都出现的行，例如：第6-8、10-12和第15行。这些行是用作差异比较的上下文。

- 第3-8行是第一个差异小节。每个差异小节以一行差异定位语句开始。第3行就是一条差异定位语句，其前后分别用两个@进行标识。

- 第3行定位语句中-1，4的含义是：本差异小节的内容相当于原始文件的从第1行开始的4行。而第4、6、7、8行是原始文件中的内容，加起来刚好是4行。

- 第3行定位语句中+1，4的含义是：本差异小节的内容相当于目标文件的从第1行开始的4行。而第5、6、7、8行是目标文件中的内容，加起来刚好是4行。

- 因为命令diff是用于行比较的，所以即使改正了一个字，也显示为一整行的修改（参见差异文件第4、5行）。Git对diff进行了扩展，并且还提供一种逐词比较的差异比较方法。

- 第9-18行是第二个差异小节。第9行是一条差异定位语句。

- 第9行定位语句中-6，6的含义是：本差异小节的内容相当于原始文件的从第6行开始的6行。第10-15行是原始文件中的内容，加起来刚好是6行。

- 第9行定位语句中+6，7的含义是：本差异小节的内容相当于目标文件的从第6行开始的7行。而第10-12、15-18行是目标文件中的内容，加起来刚好是7行。



### git diff常用参数

1. 不带任何选项和参数调用git diff显示工作区的最新改动，即工作区与提交任务（提交暂存区，stage）中相比的差异。

~~~
git diff
~~~

2. 将工作区和HEAD（当前工作分支）相比，会看到更多的差异。
~~~
git diff HEAD
~~~

3. 通过参数--cached或--staged调用git diff命令，看到的是提交暂存区（提交任务，stage）和版本库中文件的差异。 

~~~
git diff --cached
~~~



![微信图片_20210622102452](https://gitee.com/nsaction/blog_pic/raw/master/20210622112954.jpeg)

### git diff里程碑比较

- 比较里程碑B和里程碑A，用命令：`git diff B A`
- 比较工作区和里程碑A，用命令：`git diff A`
- 比较暂存区和里程碑A，用命令：`git diff--cached A`

### git diff扩展

1. 文件不同版本的差异比较差异比较还可以使用路径参数，只显示不同版本间该路径下文件的差异。语法格式如下： 
~~~
git diff <commit1> <commit2> -- <paths>  
~~~

2. 非Git目录/文件的差异比较命令git diff还可以在Git版本库之外执行，对非Git目录进行比较，就像GNU的diff命令一样。之所以提供这个功能是因为Git差异比较命令更为强大，提供了对二进制文件差异等的扩展支持。语法格式如下：
~~~
git diff <path1> <path2> 
~~~
3. 逐词比较，而非默认的逐行比较Git的差异比较默认是逐行比较，分别显示改动前的行和改动后的行，到底改动在哪里还需要仔细辨别。Git还提供一种逐词比较的输出，有的人会更喜欢。使用--word-diff参数可以显示逐词比较。 
~~~
git diff --word-diff diff --git a/src/book/02-use-git/080-git-history-travel.rst b/src/book/02-use-git/080-git-history-travel.rst 
index f740203..2dd3e6f 100644 
--- a/src/book/02-use-git/080-git-history-travel.rst 
+++ b/src/book/02-use-git/080-git-history-travel.rst 
@@ -681，7 +681，7 @@
Git的大部分命令可以使用提交版本作为参数（如：git diff），
::
  [-18:23:48 jiangxin@hp:~/gitwork/gitbook/src/book$-]{+$+} 
git log --stat --oneline  I..C
  0cd7f2e commit C.    
    README    |    1 +
    doc/C.txt |    1 +
~~~
上面的逐词差异显示是有颜色的：删除内容[-...-]用红色表示，添加的内容{+...+}用绿色表示。